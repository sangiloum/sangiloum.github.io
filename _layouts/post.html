---
layout: default
---
<article class="page">
  {% assign page_year = page.date | date: "%Y" %}
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <ol class="breadcrumb-list post-breadcrumb-list">
      <li class="breadcrumb-item">
        <a href="{{ '/' | relative_url }}">Home</a>
      </li>
      <li class="breadcrumb-sep" aria-hidden="true">/</li>
      <li class="breadcrumb-item">
        <a href="{{ '/blog/' | relative_url }}">Blog</a>
      </li>
      <li class="breadcrumb-sep" aria-hidden="true">/</li>
      <li id="breadcrumb-year-item" class="breadcrumb-item">
        <a href="{{ '/' | append: page_year | append: '/' | relative_url }}">{{ page_year }}</a>
      </li>
      <li id="breadcrumb-year-sep" class="breadcrumb-sep" aria-hidden="true">/</li>
      <li id="breadcrumb-category-label-item" class="breadcrumb-item" style="display: none;">
        <span>Category</span>
      </li>
      <li id="breadcrumb-category-label-sep" class="breadcrumb-sep" style="display: none;" aria-hidden="true">/</li>
      <li id="breadcrumb-category-item" class="breadcrumb-item" style="display: none;">
        <a id="breadcrumb-category-link" href="#"></a>
      </li>
      <li id="breadcrumb-category-item-sep" class="breadcrumb-sep" style="display: none;" aria-hidden="true">/</li>
      <li class="breadcrumb-item">
        <span aria-current="page">{{ page.title }}</span>
      </li>
    </ol>
  </nav>
  <nav class="post-pagination-top" aria-label="Post navigation top">
    <a class="post-nav-icon-link post-nav-prev-link{% unless page.previous %} is-empty{% endunless %}" href="{% if page.previous %}{{ page.previous.url | relative_url }}{% else %}#{% endif %}" aria-label="{% if page.previous %}Previous: {{ page.previous.title | escape }}{% else %}No previous post{% endif %}"{% unless page.previous %} aria-disabled="true" tabindex="-1"{% endunless %}>
      <span class="post-nav-icon" aria-hidden="true">←</span>
    </a>
    <a id="post-nav-up" class="post-nav-icon-link post-nav-up-link" href="{{ '/blog/' | relative_url }}" aria-label="Back to Blog">
      <span class="post-nav-icon" aria-hidden="true">↑</span>
    </a>
    <a class="post-nav-icon-link post-nav-next-link{% unless page.next %} is-empty{% endunless %}" href="{% if page.next %}{{ page.next.url | relative_url }}{% else %}#{% endif %}" aria-label="{% if page.next %}Next: {{ page.next.title | escape }}{% else %}No next post{% endif %}"{% unless page.next %} aria-disabled="true" tabindex="-1"{% endunless %}>
      <span class="post-nav-icon" aria-hidden="true">→</span>
    </a>
  </nav>
  <header class="page-header">
    <h1>{{ page.title }}</h1>
    <p class="lead">
      {{ page.date | date: "%Y-%m-%d" }}
      ·
      <a href="{{ '/' | append: page_year | append: '/' | relative_url }}">{{ page_year }}</a>
    </p>
    {% if page.categories and page.categories.size > 0 %}
    <p class="post-meta-categories">
      {% for category in page.categories %}
      {% assign category_slug = category | slugify %}
      <a class="category-chip" href="{{ '/blog/category/' | append: category_slug | append: '/' | relative_url }}">{{ category }}</a>
      {% endfor %}
    </p>
    {% endif %}
  </header>
  {% if page.featured_image %}
  <figure class="post-featured post-featured-post">
    <img
      src="{{ page.featured_image | relative_url }}"
      alt="{{ page.title | escape }}"
      loading="lazy"
      decoding="async"
    >
  </figure>
  {% endif %}
  <section class="page-body">
    {{ content }}
  </section>
  <nav class="post-pagination" aria-label="Post navigation">
    <a id="post-nav-prev" class="post-nav-link post-nav-prev-link{% unless page.previous %} is-empty{% endunless %}" href="{% if page.previous %}{{ page.previous.url | relative_url }}{% else %}#{% endif %}"{% unless page.previous %} aria-disabled="true" tabindex="-1"{% endunless %}>
      <span class="post-nav-label">{% if page.previous %}Previous{% endif %}</span>
      <span class="post-nav-title">{% if page.previous %}{{ page.previous.title }}{% endif %}</span>
    </a>
    <a id="post-nav-back" class="post-nav-back post-nav-back-link" href="{{ '/blog/' | relative_url }}">Back to Blog</a>
    <a id="post-nav-next" class="post-nav-link post-nav-next-link{% unless page.next %} is-empty{% endunless %}" href="{% if page.next %}{{ page.next.url | relative_url }}{% else %}#{% endif %}"{% unless page.next %} aria-disabled="true" tabindex="-1"{% endunless %}>
      <span class="post-nav-label">{% if page.next %}Next{% endif %}</span>
      <span class="post-nav-title">{% if page.next %}{{ page.next.title }}{% endif %}</span>
    </a>
  </nav>
</article>

<script>
document.addEventListener("DOMContentLoaded", function () {
  var breadcrumbYearItem = document.getElementById("breadcrumb-year-item");
  var breadcrumbYearSep = document.getElementById("breadcrumb-year-sep");
  var breadcrumbCategoryLabelItem = document.getElementById("breadcrumb-category-label-item");
  var breadcrumbCategoryLabelSep = document.getElementById("breadcrumb-category-label-sep");
  var breadcrumbCategoryItem = document.getElementById("breadcrumb-category-item");
  var breadcrumbCategoryItemSep = document.getElementById("breadcrumb-category-item-sep");
  var breadcrumbCategoryLink = document.getElementById("breadcrumb-category-link");

  function showYearBreadcrumb() {
    if (breadcrumbYearItem) breadcrumbYearItem.style.display = "";
    if (breadcrumbYearSep) breadcrumbYearSep.style.display = "";
    if (breadcrumbCategoryLabelItem) breadcrumbCategoryLabelItem.style.display = "none";
    if (breadcrumbCategoryLabelSep) breadcrumbCategoryLabelSep.style.display = "none";
    if (breadcrumbCategoryItem) breadcrumbCategoryItem.style.display = "none";
    if (breadcrumbCategoryItemSep) breadcrumbCategoryItemSep.style.display = "none";
  }

  function showCategoryBreadcrumb(categoryValue, categoryHref) {
    if (breadcrumbYearItem) breadcrumbYearItem.style.display = "none";
    if (breadcrumbYearSep) breadcrumbYearSep.style.display = "none";
    if (breadcrumbCategoryLabelItem) breadcrumbCategoryLabelItem.style.display = "";
    if (breadcrumbCategoryLabelSep) breadcrumbCategoryLabelSep.style.display = "";
    if (breadcrumbCategoryItem) breadcrumbCategoryItem.style.display = "";
    if (breadcrumbCategoryItemSep) breadcrumbCategoryItemSep.style.display = "";
    if (breadcrumbCategoryLink) {
      breadcrumbCategoryLink.href = categoryHref;
      breadcrumbCategoryLink.textContent = categoryValue;
    }
  }

  showYearBreadcrumb();

  var params = new URLSearchParams(window.location.search);
  var activeCategory = (params.get("category") || "").trim().toLowerCase();
  var activeYear = (params.get("year") || "").trim();
  if (!activeCategory && !activeYear) return;
  var currentPostPath = {{ page.url | relative_url | jsonify }};
  var prevLinks = Array.prototype.slice.call(document.querySelectorAll(".post-nav-prev-link"));
  var nextLinks = Array.prototype.slice.call(document.querySelectorAll(".post-nav-next-link"));
  var backLink = document.getElementById("post-nav-back");
  var upLink = document.getElementById("post-nav-up");

  var categoryPosts = {
    {% assign sorted_categories = site.categories | sort %}
    {% for category in sorted_categories %}
    {{ category[0] | downcase | jsonify }}: [
      {% for post in category[1] %}
      { url: {{ post.url | relative_url | jsonify }}, title: {{ post.title | jsonify }} }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]{% unless forloop.last %},{% endunless %}
    {% endfor %}
  };

  var categoryPages = {
    {% for category in sorted_categories %}
    {% assign category_slug = category[0] | slugify %}
    {% assign category_url = '/blog/category/' | append: category_slug | append: '/' | relative_url %}
    {{ category[0] | downcase | jsonify }}: {{ category_url | jsonify }}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  };

  var yearPosts = {
    {% assign yearly_groups = site.posts | group_by_exp: "post", "post.date | date: '%Y'" %}
    {% for yearly in yearly_groups %}
    {{ yearly.name | jsonify }}: [
      {% for post in yearly.items %}
      { url: {{ post.url | relative_url | jsonify }}, title: {{ post.title | jsonify }} }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    ]{% unless forloop.last %},{% endunless %}
    {% endfor %}
  };

  var yearPages = {
    {% for yearly in yearly_groups %}
    {{ yearly.name | jsonify }}: {{ '/' | append: yearly.name | append: '/' | relative_url | jsonify }}{% unless forloop.last %},{% endunless %}
    {% endfor %}
  };

  function normalizePath(path) {
    var value = (path || "");
    value = value.split("?")[0].split("#")[0];
    try {
      value = decodeURIComponent(value);
    } catch (e) {}
    value = value.replace(/\/+$/, "");
    return value === "" ? "/" : value;
  }

  function setLink(link, item, label, queryKey, queryValue) {
    if (!link) return;
    var titleEl = link.querySelector(".post-nav-title");
    var labelEl = link.querySelector(".post-nav-label");
    if (!item) {
      link.classList.add("is-empty");
      link.setAttribute("aria-disabled", "true");
      link.setAttribute("tabindex", "-1");
      link.href = "#";
      if (titleEl) titleEl.textContent = "";
      if (labelEl) labelEl.textContent = "";
      if (!titleEl && !labelEl) link.setAttribute("aria-label", "No " + label.toLowerCase() + " post");
      return;
    }
    var href = item.url;
    if (queryKey && queryValue) {
      href += "?" + queryKey + "=" + encodeURIComponent(queryValue);
    }
    link.href = href;
    link.classList.remove("is-empty");
    link.removeAttribute("aria-disabled");
    link.removeAttribute("tabindex");
    if (titleEl) titleEl.textContent = item.title;
    if (labelEl) labelEl.textContent = label;
    if (!titleEl && !labelEl) link.setAttribute("aria-label", label + ": " + item.title);
  }

  function setBackNavigation(href, text, ariaLabel) {
    if (backLink) {
      backLink.href = href;
      backLink.textContent = text;
    }
    if (upLink) {
      upLink.href = href;
      upLink.setAttribute("aria-label", ariaLabel);
    }
  }

  // In context mode, clear default global links first.
  prevLinks.forEach(function (link) { setLink(link, null, "Previous", "", ""); });
  nextLinks.forEach(function (link) { setLink(link, null, "Next", "", ""); });

  var currentPath = normalizePath(currentPostPath);
  var runtimePath = normalizePath(window.location.pathname);

  if (activeCategory) {
    var categoryItems = categoryPosts[activeCategory];
    if (!categoryItems || !categoryItems.length) {
      if (categoryPages[activeCategory]) {
        setBackNavigation(
          categoryPages[activeCategory],
          '"' + activeCategory + '" category',
          'Back to "' + activeCategory + '" category'
        );
        showCategoryBreadcrumb(activeCategory, categoryPages[activeCategory]);
      }
      return;
    }

    var categoryIndex = categoryItems.findIndex(function (post) {
      var postPath = normalizePath(post.url);
      return postPath === currentPath || postPath === runtimePath;
    });
    if (categoryIndex < 0) {
      if (categoryPages[activeCategory]) {
        setBackNavigation(
          categoryPages[activeCategory],
          '"' + activeCategory + '" category',
          'Back to "' + activeCategory + '" category'
        );
        showCategoryBreadcrumb(activeCategory, categoryPages[activeCategory]);
      }
      return;
    }

    // Previous -> older post, Next -> newer post.
    var categoryPrev = categoryIndex < categoryItems.length - 1 ? categoryItems[categoryIndex + 1] : null;
    var categoryNext = categoryIndex > 0 ? categoryItems[categoryIndex - 1] : null;
    prevLinks.forEach(function (link) { setLink(link, categoryPrev, "Previous", "category", activeCategory); });
    nextLinks.forEach(function (link) { setLink(link, categoryNext, "Next", "category", activeCategory); });

    if (categoryPages[activeCategory]) {
      setBackNavigation(
        categoryPages[activeCategory],
        '"' + activeCategory + '" category',
        'Back to "' + activeCategory + '" category'
      );
      showCategoryBreadcrumb(activeCategory, categoryPages[activeCategory]);
    }
    return;
  }

  var yearItems = yearPosts[activeYear];
  if (!yearItems || !yearItems.length) {
    if (yearPages[activeYear]) {
      setBackNavigation(
        yearPages[activeYear],
        activeYear + " archive",
        "Back to " + activeYear + " archive"
      );
    }
    return;
  }

  var yearIndex = yearItems.findIndex(function (post) {
    var postPath = normalizePath(post.url);
    return postPath === currentPath || postPath === runtimePath;
  });
  if (yearIndex < 0) {
    if (yearPages[activeYear]) {
      setBackNavigation(
        yearPages[activeYear],
        activeYear + " archive",
        "Back to " + activeYear + " archive"
      );
    }
    return;
  }

  var yearPrev = yearIndex < yearItems.length - 1 ? yearItems[yearIndex + 1] : null;
  var yearNext = yearIndex > 0 ? yearItems[yearIndex - 1] : null;
  prevLinks.forEach(function (link) { setLink(link, yearPrev, "Previous", "year", activeYear); });
  nextLinks.forEach(function (link) { setLink(link, yearNext, "Next", "year", activeYear); });
  if (yearPages[activeYear]) {
    setBackNavigation(
      yearPages[activeYear],
      activeYear + " archive",
      "Back to " + activeYear + " archive"
    );
    showYearBreadcrumb();
  }
});
</script>
